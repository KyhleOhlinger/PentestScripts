#!/bin/bash
#Simple SMB Share Scanner Script

if [ -z "$1" ]; then
echo "[*] Simple SMB Share Scanner"
echo "[*] Usage : $0 <IP_Range>"
exit 0
fi

mkdir /home/user/Desktop/SMBScans && chmod 777 /home/user/Desktop/SMBScans && cd /home/user/Desktop/SMBScans

nmap $1 -sn -Pn > Range_Up
cat Range_Up | grep -i "report for" | cut -d " " -f 5 > IP_Range_Up
rm Range_Up
nmap -iL IP_Range_Up -p136,445 --open > SMB_Open
cat SMB_Open | grep -i "report for" | cut -d " " -f 5 > IP_SMB_Open
rm SMB_Open
echo "[*] Note"
echo "[*] You can use the above IPs with SMBMap to determine SMB Shares"
echo "[*][*] smbmap -H <IP>/--host-file <FILE> -d <DOMAIN> -u <USER> -p <PASSWORD>"
echo "[*] You can use the above IPs with Nmap Vuln Scanner to determine SMB Vulns"
echo "[*][*] nmap -iL IP_SMB_Open --script smb-vuln* > SMB_Vulns"


